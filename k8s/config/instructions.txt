UPUTE ZA POKRETANJE (Rancher Desktop + Kubernetes)

1. Pobrinite se da je Rancher Desktop ispravno konfiguriran (uklju훾en Kubernetes dio) i uklju훾en.

2. Za svaki mikroservis napravite build image-a:
   cd aggregator-microservice && ./gradlew bootBuildImage && cd ..
   cd temperature-microservice && ./gradlew bootBuildImage && cd ..
   cd humidity-microservice && ./gradlew bootBuildImage && cd ..

   PROVJERA: docker images | grep microservice
   Trebali biste vidjeti:
   - temperature-microservice:0.0.1-SNAPSHOT
   - humidity-microservice:0.0.1-SNAPSHOT
   - aggregator-microservice:0.0.1-SNAPSHOT

3. Deploy ConfigMap-ovi PRVO (za mount datoteka):
   kubectl apply -f k8s/config/readings-configmap.yaml
   kubectl apply -f k8s/config/aggregator-configmap.yaml

4. Deploy temperature i humidity mikroservisi:
   kubectl apply -f k8s/config/temperature.yaml
   kubectl apply -f k8s/config/humidity.yaml

5. Deploy aggregator (posljednji):
   kubectl apply -f k8s/config/aggregator.yaml

6. Provjera statusa:
   kubectl get pods -o wide          # Svi Running/1/1
   kubectl get svc                   # NodePort: 30080, 30081, 30082

7. TESTIRANJE (Rancher Desktop localhost radi):
   curl http://localhost:30080/sensor/temp        # Temperature 째C
   curl http://localhost:30081/sensor/humidity    # Humidity %
   curl http://localhost:30082/aggregator         # Agregirano (K ili C ovisno o configu)

8. Promjena temperature unit-a (째C / K):
   kubectl edit configmap aggregator-config       # Promijenite temperature.unit=C|K
   kubectl rollout restart deployment/aggregator-deployment
   curl http://localhost:30082/aggregator         # Provjerite promjenu

9. Cleanup (ukoliko je potreban):
   kubectl delete -f k8s/config/aggregator.yaml
   kubectl delete -f k8s/config/temperature.yaml
   kubectl delete -f k8s/config/humidity.yaml
   kubectl delete configmap readings-cm aggregator-config