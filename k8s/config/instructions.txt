UPUTE:
1. pobrinite se da je rancher desktop ispravno konfiguriran (ukljucen kubernetes dio) i ukljucen.

2. za svaki mikroservis je potrebno napraviti build image:
    - u root direktoriju projekta pokrenututi:
        - "cd aggregator-microservice | ./gradlew bootBuildImage"
        - "cd .."
        - "cd temperature-microservice | ./gradlew bootBuildImage"
        - "cd .."
        - "cd humidity-microservice | ./gradlew bootBuildImage"
        - "cd .."

    PROVJERA: "docker images | grep microservice"
              - trebali biste vidjeti izlistana 3 mikroservis image-a:
                - temperature-microservice:0.0.1-SNAPSHOT
                - humidity-microservice:0.0.1-SNAPSHOT
                - aggregator-microservice:0.0.1-SNAPSHOT



# 1) Deploy ConfigMap-ovi (prvo, da ih podovi mogu mountati)
kubectl apply -f k8s/config/readings-configmap.yaml
kubectl apply -f k8s/config/aggregator-configmap.yaml

# 2) Deploy temperature i humidity (Deployment + Service)
kubectl apply -f k8s/config/temperature.yaml
kubectl apply -f k8s/config/humidity.yaml

# 3) Deploy aggregator (Deployment + Service/NodePort gateway)
kubectl apply -f k8s/config/aggregator.yaml

# 4) Provjera statusa
kubectl get pods
kubectl get svc

# 5) Primjer dohvaćanja agregiranih očitanja

# Opcija A: NodePort (ako si u aggregator-service stavio type: NodePort i nodePort: 30082)
# (na Rancher Desktop/localhost obično radi ovako)
curl http://localhost:30082/<AGGREGATOR_ENDPOINT>

# Opcija B: Port-forward (ako ne koristiš NodePort ili ti je lakše za demo)
kubectl port-forward deployment/aggregator-deployment 8082:8082
curl http://localhost:8082/<AGGREGATOR_ENDPOINT>
